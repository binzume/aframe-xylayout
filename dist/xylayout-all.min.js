AFRAME.registerGeometry("css-rounded-rect",{schema:{height:{default:1,min:0},width:{default:1,min:0},radiusBL:{default:.05,min:0},radiusBR:{default:.05,min:0},radiusTL:{default:.05,min:0},radiusTR:{default:.05,min:0}},init(t){let e=new THREE.Shape,i=(t.width||.01)/2,s=(t.height||.01)/2;e.moveTo(-i,-s+t.radiusBL),e.lineTo(-i,s-t.radiusTL),e.quadraticCurveTo(-i,s,-i+t.radiusTL,s),e.lineTo(i-t.radiusTR,s),e.quadraticCurveTo(i,s,i,s-t.radiusTR),e.lineTo(i,-s+t.radiusBR),e.quadraticCurveTo(i,-s,i-t.radiusBR,-s),e.lineTo(-i+t.radiusBL,-s),e.quadraticCurveTo(-i,-s,-i,-s+t.radiusBL),this.geometry=new THREE.ShapeGeometry(e)}}),AFRAME.registerComponent("css-borderline",{schema:{height:{default:1,min:0},width:{default:1,min:0},color:{default:""},style:{default:"solid"},linewidth:{default:1,min:0},radiusBL:{default:.05,min:0},radiusBR:{default:.05,min:0},radiusTL:{default:.05,min:0},radiusTR:{default:.05,min:0}},update(){let t=this.data,e=new THREE.Path,i=(t.width||.01)/2,s=(t.height||.01)/2;e.moveTo(-i,-s+t.radiusBL),e.lineTo(-i,s-t.radiusTL),e.quadraticCurveTo(-i,s,-i+t.radiusTL,s),e.lineTo(i-t.radiusBR,s),e.quadraticCurveTo(i,s,i,s-t.radiusBR),e.lineTo(i,-s+t.radiusBR),e.quadraticCurveTo(i,-s,i-t.radiusBR,-s),e.lineTo(-i+t.radiusBL,-s),e.quadraticCurveTo(-i,-s,-i,-s+t.radiusBL);let h=(new THREE.BufferGeometry).setFromPoints(e.getPoints()),l=t.linewidth,a=t.color,o=2.54*l/96/10,r="dotted"==t.style?new THREE.LineDashedMaterial({linewidth:l,color:a,gapSize:o,dashSize:o}):"dashed"==t.style?new THREE.LineDashedMaterial({linewidth:l,color:a,gapSize:o,dashSize:3*o}):new THREE.LineBasicMaterial({linewidth:l,color:a}),n=new THREE.Line(h,r);"solid"!=t.style&&n.computeLineDistances(),n.position.set(0,0,.001),n.raycast=(()=>{}),this.el.setObject3D("css-borderline",n),this.t(),this.s=n},remove(){this.el.removeObject3D("css-borderline"),this.t()},s:null,t(){this.s&&(this.s.material.dispose(),this.s.geometry.dispose(),this.s=null)}}),AFRAME.registerComponent("css",{schema:{},h:null,l:!1,p:!1,init(){let t=this.el,e=getComputedStyle(t);if("none"!=e.pointerEvents){let i=this.g(e.getPropertyValue("--collider-class"))||"collidable",s=this.g(e.getPropertyValue("--hover-alt-class"))||"_hover";t.classList.add(i),t.addEventListener("mouseenter",e=>{t.classList.add(s)}),t.addEventListener("mouseleave",e=>{t.classList.remove(s)})}t.addEventListener("transitionstart",t=>{this.p=!0,this.play()}),t.addEventListener("transitionend",t=>{this.p=!1}),t.addEventListener("animationstart",t=>{this.p=!0,this.play()}),t.addEventListener("animationend",t=>{this.p=!1}),this.h=new MutationObserver((t,e)=>{t.find(t=>"class"==t.attributeName||"style"==t.attributeName)&&this.m()}),this.h.observe(this.el,{attributes:!0}),this.m()},tick(){this.p?this.m():this.pause()},remove(){this.h.disconnect()},m(){let t=getComputedStyle(this.el);this.v(t),this.R(t),this.k(t),this.el.setAttribute("visible","hidden"!=t.getPropertyValue("--visibility")),this.el.childElementCount>0?this.T(t):this.el.removeAttribute("xycontainer"),this.A(t)},v(t){let e=this.M(t.backgroundColor),i=this.H(t.borderWidth);(e[3]>0||i>0)&&this.el.setAttribute("material",{color:t.backgroundColor,opacity:e[3],src:this.C(t.backgroundImage)||""})},R(t){if(this.el.components.xyinput){return void(this.M(t.caretColor)[3]>0&&this.el.setAttribute("xyinput","caretColor",t.caretColor))}let e=null,i=this.el.firstChild;if(i&&i.nodeType==Node.TEXT_NODE&&(e=i.textContent.trim()),!e){let i=/^["'](.*)["']$/.exec(t.content);e=i?i[1]:""}null!=e&&this.el.setAttribute("xylabel","value",e),this.M(t.color)[3]>0&&this.el.setAttribute("xylabel","color",t.color);let s=t.textAlign;"start"==s&&(s="left"),"end"==s&&(s="right"),s&&this.el.setAttribute("xylabel","align",s)},k(t){let e=this.F(t.width,this.el.parentElement),i=this.F(t.height,this.el.parentElement,!0);(e>0||i>0)&&this.el.setAttribute("xyrect",{width:e,height:i});let s="fixed"==t.position,h=parseInt(t.flexGrow),l=parseInt(t.flexShrink);(s||h||l)&&this.el.setAttribute("xyitem",{fixed:s,grow:h,shrink:l});let a=this.M(t.backgroundColor),o=this.H(t.borderWidth);(a[3]>0||o>0)&&this.el.setAttribute("geometry",{primitive:"css-rounded-rect",width:e,height:i,radiusBL:this.F(t.borderBottomLeftRadius),radiusBR:this.F(t.borderBottomRightRadius),radiusTL:this.F(t.borderTopLeftRadius),radiusTR:this.F(t.borderTopRightRadius)}),o>0?this.el.setAttribute("css-borderline",{width:e,height:i,linewidth:o,color:t.borderColor,style:t.borderStyle,radiusBL:this.F(t.borderBottomLeftRadius),radiusBR:this.F(t.borderBottomRightRadius),radiusTL:this.F(t.borderTopLeftRadius),radiusTR:this.F(t.borderTopRightRadius)}):this.el.removeAttribute("css-borderline")},T(t){"fixed"==t.position&&this.el.setAttribute("xyitem",{fixed:!0}),this.el.setAttribute("xycontainer",{wrap:t.flexWrap,direction:t.flexDirection,spacing:this.F(t.columnGap),alignContent:t.alignContent,justifyItems:["space-between","space-around"].includes(t.justifyContent)?t.justifyContent:t.justifyItems,alignItems:t.alignItems})},A(t){if(this.l=this.l||"none"!=t.transform,this.l){let e=new DOMMatrix(t.transform),i=new THREE.Vector3,s=new THREE.Quaternion,h=new THREE.Vector3;(new THREE.Matrix4).set(e.m11,e.m21,e.m31,e.m41,e.m12,e.m22,e.m32,e.m42,e.m13,e.m23,e.m33,e.m43,e.m14,e.m24,e.m34,e.m44).decompose(i,s,h),this.el.object3D.quaternion.copy(s),this.el.object3D.scale.copy(h),this.el.object3D.position.setZ(2.54*i.z/96/10)}},H(t,e=null,i=!1){if(t.endsWith("%")&&e){let s=getComputedStyle(e);return this.H(i?s.height:s.width,e.parentElement,i)*parseFloat(t.substring(0,t.length-1))*.01}let s=/^\s*([\d\.]+)px\s*$/.exec(t);return s?parseFloat(s[1]):0},F(t,e=null,i=!1){return 2.54*this.H(t,e,i)/96/10},g(t){let e=/^\s*"(.*)"\s*$/.exec(t);return e&&e[1]},C(t){let e=/^\s*url\("(.*)"\)\s*$/.exec(t);return e&&e[1]},M(t){let e=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t);if(e&&("rgb"==e[1]||"rgba"==e[1])){let t=/^\s*(\d+)[,\s]+(\d+)[,\s]+(\d+)\s*(?:[,/]\s*(\d*\.?\d+)\s*)?$/.exec(e[2]);if(t)return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseFloat(t[4]||"1")]}return[0,0,0,0]}}),AFRAME.registerPrimitive("a-css-entity",{defaultComponents:{xyrect:{},css:{}}});"use strict";AFRAME.registerComponent("xyinput",{dependencies:["xylabel"],schema:{value:{default:""},type:{default:""},placeholder:{default:""},caretColor:{default:"#0088ff"},bgColor:{default:"white"}},init(){let t=this.data,e=this.el,i=e.components.xyrect,s=t=>{let i=this.cursor,s=e.value;this.cursor+=t.length,e.value=s.slice(0,i)+t+s.slice(i)};Object.defineProperty(e,"value",{get:()=>t.value,set:t=>e.setAttribute("xyinput","value",""+t)}),this._=new THREE.Mesh(new THREE.PlaneGeometry(.04,.9*i.height)),e.setObject3D("caret",this._),XYTheme.get(e).createButton(i.width,i.height,null,{color:t.bgColor,hoverColor:t.bgColor},!1,e),e.setAttribute("tabindex",0);let h=t=>{t.clipboardData.setData("text/plain",e.value),t.preventDefault()},l=t=>{s(t.clipboardData.getData("text/plain")),t.preventDefault()},a=this;this.events={click(i){e.focus(),e.emit("xykeyboard-request",t.type);let s=i.detail.intersection;if(s){let t=s.uv.x,i=0,h=e.value.length,l=0;for(;h>i;)a.S(l=i+((h-i+1)/2|0))<t?i=l:h=l-1;a.O(i)}},focus(t){a.O(a.cursor),window.addEventListener("copy",h),window.addEventListener("paste",l)},blur(t){a.O(a.cursor),window.removeEventListener("copy",h),window.removeEventListener("paste",l)},keypress(t){"Enter"!=t.code&&s(t.key)},keydown(t){let i=a.cursor,s=e.value;"ArrowLeft"==t.code?i>0&&a.O(i-1):"ArrowRight"==t.code?i<s.length&&a.O(i+1):"Backspace"==t.code&&i>0&&(a.cursor--,e.value=s.slice(0,i-1)+s.slice(i))}}},update(t){let e=this.el,i=this.data,s=e.value,h=this.cursor,l=s.length;(h>l||null==t.value)&&(h=l),e.setAttribute("xylabel",{color:s?"black":"#aaa",value:("password"==i.type?"*".repeat(l):s)||i.placeholder}),this._.material.color=new THREE.Color(i.caretColor),this.O(h)},O(t){let e=this._;this.cursor=t,e.visible=!1,document.activeElement==this.el&&setTimeout(()=>{e.position.set(this.S(t),0,.02),e.visible=!0},0)},S(t){return this.el.components.xylabel.getPos(t)+.04}}),AFRAME.registerComponent("xyime",{schema:{label:{default:null,type:"selector"}},table:{a:"あ",i:"い",u:"う",e:"え",o:"お",ka:"か",ki:"き",ku:"く",ke:"け",ko:"こ",ga:"が",gi:"ぎ",gu:"ぐ",ge:"げ",go:"ご",sa:"さ",si:"し",su:"す",se:"せ",so:"そ",za:"ざ",zi:"じ",zu:"ず",ze:"ぜ",zo:"ぞ",ta:"た",ti:"ち",tu:"つ",te:"て",to:"と",da:"だ",di:"ぢ",du:"づ",de:"で",do:"ど",na:"な",ni:"に",nu:"ぬ",ne:"ね",no:"の",ha:"は",hi:"ひ",hu:"ふ",he:"へ",ho:"ほ",pa:"ぱ",pi:"ぴ",pu:"ぷ",pe:"ぺ",po:"ぽ",ba:"ば",bi:"び",bu:"ぶ",be:"べ",bo:"ぼ",ma:"ま",mi:"み",mu:"む",me:"め",mo:"も",ya:"や",yi:"い",yu:"ゆ",ye:"いぇ",yo:"よ",ra:"ら",ri:"り",ru:"る",re:"れ",ro:"ろ",wa:"わ",wi:"うぃ",wu:"う",we:"うぇ",wo:"を",xa:"ぁ",xi:"ぃ",xu:"ぅ",xe:"ぇ",xo:"ぉ",xya:"ゃ",xyi:"ぃ",xyu:"ゅ",xye:"ぇ",xyo:"ょ",xtu:"っ",xka:"ヵ",xke:"ヶ",nn:"ん",wyi:"ゐ",wye:"ゑ",fu:"ふ",vu:"ヴ",tsu:"つ",chi:"ち",ji:"じ",shi:"し","-":"ー"},init(){this.enable=!1,this.j="",this.B=[],this.$=0,this.L=this.L.bind(this),document.body.addEventListener("keydown",this.L,!0),document.body.addEventListener("keypress",this.L,!0)},remove(){document.body.removeEventListener("keydown",this.L,!0),document.body.removeEventListener("keypress",this.L,!0)},async convert(t,e){let i=await fetch(`https://www.google.com/transliterate?langpair=ja-Hira|ja&text=${t},`);e((await i.json())[0][1])},L(t){if("CapsLock"==t.code&&t.shiftKey||"HiraganaKatakana"==t.key)return this.enable=!this.enable,void this.I(t.target);if(this.enable&&t.code){if("keypress"==t.type){if(this.B.length>0){if("Space"==t.code)return this.$=(this.$+1)%this.B.length,this.X(this.B[this.$]),void t.stopPropagation();this.I(t.target)}if(t.key.match(/^[^\s]$/)){let e=[[/n([^aiueoyn])/g,"nn$1"],[/([ksthmyrwgzbpdjfv])\1/g,"xtu$1"],[/([kstnhmrgzbpdj])(y[aiueo])/g,"$1ix$2"],[/(j|ch|sh)([aueo])/g,"$1ixy$2"],[/(f|v|ts)(y?[aieo])/g,"$1ux$2"],[/(t|d)h([aiueo])/g,"$1exy$2"]].reduce((t,[e,i])=>t.replace(e,i),this.j+t.key);for(let t=0;t<e.length;t++)for(let i=3;i>=0;i--){let s=this.table[e.slice(t,t+i)];if(s){e=e.slice(0,t)+s+e.slice(t+i);break}}this.X(e)}else if("Space"==t.code&&this.j)this.convert(this.j,t=>{this.B=t,this.$=0,this.X(t[0])}),this.X("");else{if(!this.j)return;this.X(this.j+t.key)}}else{if(!this.j)return;"Enter"==t.code?this.I(t.target):"Backspace"==t.code&&this.X(this.j.slice(0,-1))}t.stopPropagation()}},X(t){this.j=t,(this.data.label||this.el).setAttribute("value",t)},I(t){this.j&&(t.dispatchEvent(new KeyboardEvent("keypress",{key:this.j})),this.X("")),this.B=[]}}),AFRAME.registerComponent("xykeyboard",{schema:{distance:{default:.7},ime:{default:!1}},blocks:{main:{size:[11,4],rows:[{pos:[0,3],keys:["qQ!","wW@","eE#","rR$","tT%","yY^","uU&","iI*","oO(","pP)","-_="]},{pos:[0,2],keys:["aA1","sS2","dD3","fF4","gG5","hH`","jJ~","kK+","lL[",":;]"]},{pos:[0,1],keys:[{code:"Shift",symbols:"⇧⬆"},"zZ6","xX7","cC8","vV9","bB0","nN{","mM}",",'<",'.">',"/?\\"]},{pos:[0,0],keys:[{code:"Space",key:" ",label:"_",size:4}]},{pos:[-4.5,0],keys:[{code:"_Fn",label:"#!"},{code:"HiraganaKatakana",label:"🌐"}]}]},num:{size:[4,4],rows:[{pos:[0,3],keys:["7","8","9","/"]},{pos:[0,2],keys:["4","5","6","*"]},{pos:[0,1],keys:["1","2","3","-"]},{pos:[0,0],keys:["0",":",".","+"]}]},ctrl:{size:[2,4],rows:[{pos:[0,3],keys:[{code:"Backspace",label:"⌫",size:2}]},{pos:[0,2],keys:[{code:"Space",key:" ",label:"SP",size:2}]},{pos:[0,1],keys:[{code:"Enter",label:"⏎",size:2}]},{pos:[1.3,3.5],keys:[{code:"_Close",label:"x",size:.8}]},{pos:[0,0],keys:[{code:"ArrowLeft",label:"⇦"},{code:"ArrowRight",label:"⇨"}]}]}},init(){this.el.sceneEl.addEventListener("xykeyboard-request",t=>this.show(t.detail))},show(t){this.hide();let e=this.el,i=this.data,s=i.ime?[]:["HiraganaKatakana"],h=this.blocks,l=(t,i=[])=>{let s=document.createElement("a-entity"),h=t.size;s.setAttribute("geometry",{primitive:"xy-rounded-rect",width:.2*h[0]+.06,height:.2*h[1]+.06}),s.setAttribute("material",{color:"#222233"});for(let e of t.rows){let t=s.appendChild(document.createElement("a-xycontainer"));t.setAttribute("xycontainer",{direction:"row"}),t.setAttribute("position",{x:.2*e.pos[0],y:.2*e.pos[1]-.2*(h[1]-1)/2,z:.02});for(let s of e.keys){if(i.includes(s.code))continue;let e=t.appendChild(document.createElement("a-xybutton"));e.setAttribute("material","visible",!1),e.setAttribute("xylabel",{value:s.label||"",align:"center"}),e.setAttribute("xyrect",{width:.2*(s.size||1),height:.2}),e.addEventListener("mouseenter",t=>e.setAttribute("material","visible",!0)),e.addEventListener("mouseleave",t=>e.setAttribute("material","visible",!1)),(s.symbols||"string"==typeof s)&&(e.classList.add("xyinput-key"),e.dataset.keySymbols=s.symbols||s),"_Close"==s.code&&(e.classList.add("xyinput-close"),e.addEventListener("click",t=>this.hide())),e.addEventListener("mousedown",t=>{if(document.activeElement==document.body&&this.Y&&this.Y.focus(),this.Y=document.activeElement,setTimeout(()=>this.Y.focus(),0),t.preventDefault(),"_Fn"==s.code)return void this.N(2==this.K?0:2);"Shift"==s.code&&this.N((this.K+1)%2);let e=s.code?s.key:s,i={key:e?e[this.K]||e[0]:s.code,code:s.code||s[0].toUpperCase()},h=(t,e)=>{this.Y.dispatchEvent(new KeyboardEvent(t,e))};h("keydown",i),h("keyup",i),e&&h("keypress",i)})}}return e.appendChild(s)};if("number"==t){let t=h.num.size[0]+h.ctrl.size[0];l(h.num),l(h.ctrl).setAttribute("position","x",.2*(t/2+.4))}else if("full"==t){let t=h.main.size[0]+h.ctrl.size[0];l(h.main,s),l(h.ctrl,["Space"]).setAttribute("position","x",.2*(t/2+.4)),t+=h.ctrl.size[0]+h.num.size[0],l(h.num).setAttribute("position","x",.2*(t/2+.8))}else{let t=h.main.size[0]+h.ctrl.size[0];l(h.main,s),l(h.ctrl,["Space"]).setAttribute("position","x",.2*(t/2+.4))}if(i.ime){let t=e.appendChild(document.createElement("a-xylabel"));t.setAttribute("xylabel",{color:"yellow",renderingMode:"canvas"}),t.setAttribute("position",{x:0,y:.38,z:.03}),t.setAttribute("xyrect",{width:1.6,height:.12}),t.setAttribute("xyime","")}e.setAttribute("xy-drag-control","draggable",".xyinput-close"),this.N(0);let a=e.object3D,o=a.position,r=a.parent.matrixWorld.clone().invert().multiply(e.sceneEl.camera.matrixWorld),n=o.y;o.set(0,0,-i.distance).applyMatrix4(r),o.y=n,a.rotation.y=(new THREE.Euler).setFromRotationMatrix(r.extractRotation(r),"YXZ").y},hide(){let t=this.el;for(this.Y=null,t.removeAttribute("xy-drag-control");t.firstChild;)t.removeChild(t.firstChild)},N(t){this.K=t;for(let e of this.el.querySelectorAll(".xyinput-key")){let i=e.dataset.keySymbols;e.setAttribute("xylabel","value",i[t]||i[0])}}}),AFRAME.registerPrimitive("a-xykeyboard",{defaultComponents:{xykeyboard:{}},mappings:{ime:"xykeyboard.ime",distance:"xykeyboard.distance"}}),AFRAME.registerPrimitive("a-xyinput",{defaultComponents:{xyrect:{width:2,height:.5},xyinput:{}},mappings:{width:"xyrect.width",height:"xyrect.height",value:"xyinput.value",type:"xyinput.type",placeholder:"xyinput.placeholder","caret-color":"xyinput.caretColor","background-color":"xyinput.bgColor"}}),AFRAME.registerComponent("xycontainer",{dependencies:["xyrect"],schema:{spacing:{default:0},padding:{default:0},reverse:{default:!1},wrap:{default:"nowrap",oneOf:["wrap","nowrap"]},direction:{default:"column",oneOf:["none","row","column","vertical","horizontal"]},alignItems:{default:"none",oneOf:["none","center","start","end","baseline","stretch"]},justifyItems:{default:"start",oneOf:["center","start","end","space-between","space-around","stretch"]},alignContent:{default:"",oneOf:["","none","start","end","center","stretch"]}},init(){for(let t of["child-attached","child-detached","xyresize"])this.el.addEventListener(t,t=>t.target==this.el&&setTimeout(()=>this.update()))},update(){let t=this.data,e=t.direction;if("none"==e)return;let i=this.el.components.xyrect,s=this.el.children,h="vertical"==e||"column"==e,l=t.padding,a=t.spacing,o=t.reverse!=h?-1:1,r=(t,e)=>h?[e,t*o]:[t*o,-e],n=(t,e)=>h?[e,t]:[t,e],[d,c]=n(i.width-2*l,i.height-2*l),[u,y]=n("width","height"),x=0,p=0,f=[],g=[],m=0,w=0,b=0,E=0,v=()=>{x=Math.max(x,m+a*(f.length-1)),p+=E,g.push([f,m,w,b,E]),f=[],m=0,w=0,b=0,E=0};for(let e of s){let i=e.getAttribute("xyitem");if(i&&i.fixed)continue;let s=e.components.xyrect||e.getAttribute("geometry")||{width:+(e.getAttribute("width")||NaN),height:+(e.getAttribute("height")||NaN)},h=e.getAttribute("scale")||{x:1,y:1},l=n(s.width*h.x,s.height*h.y),[o,r]=l;if(null==o||isNaN(o))continue;let c=s.data?s.data.pivot:{x:.5,y:.5};"wrap"==t.wrap&&m>0&&m+o+a*f.length>d&&v(),f.push([e,i,l,n(c.x,c.y),n(h.x,h.y)]),m+=o,w+=i?i.grow:1,b+=i?i.shrink:1,E=r>E?r:E}f.length>0&&v(),p+=a*(g.length-1),-1==i.data[u]&&(d=x,i[u]=x+2*l),-1==i.data[y]&&(c=p,i[y]=p+2*l);let R=-c/2,k=0,T=t.alignContent||t.alignItems;"end"==T?R+=c-p:"center"==T?R+=(c-p)/2:"stretch"!=T&&"none"!=T||(k=(c-p)/g.length);for(let[t,e,i,s,h]of g)this.D(t,e,i,s,-d/2,R,d,h+k,u,y,r),R+=h+k+a},D(t,e,i,s,h,l,a,o,r,n,d){let{justifyItems:c,alignItems:u,spacing:y,wrap:x}=this.data,p=0,f=t.length;"center"===c?h+=(a-e-y*f)/2:"end"===c?h+=a-e-y*f:"stretch"===c?p=(p=a-e-y*(f-1))>0?i>0?p/i:0:s>0?p/s:0:"space-between"===c?y=(a-e)/(f-1):"space-around"===c&&(h+=(y=(a-e)/f)/2);for(let[e,i,[s,a],[c,f],[g,m]]of t){let t=i&&i.align||u,w=(i?p>0?i.grow:i.shrink:1)*p,b=l+o/2,E=e.getAttribute("position")||{x:0,y:0};g>0&&0!=w&&e.setAttribute(r,(s+=w)/g),m>0&&"stretch"===t&&e.setAttribute(n,(a=o)/m),"start"===t||"stretch"===t?b=l+f*a:"end"===t?b=l+o-(1-f)*a:"center"===t?b+=(f-.5)*a:"none"===t&&"wrap"!=x&&(b="width"==n?E.x:-E.y),[E.x,E.y]=d(h+s*c,b),e.setAttribute("position",E),h+=s+y}}}),AFRAME.registerComponent("xyitem",{schema:{align:{default:"none",oneOf:["none","center","start","end","baseline","stretch"]},grow:{default:1},shrink:{default:1},fixed:{default:!1}},update(t){if(t.align){let t=this.el.parentNode.components.xycontainer;t&&t.update()}}}),AFRAME.registerComponent("xyrect",{schema:{width:{default:-1},height:{default:-1},pivot:{type:"vec2",default:{x:.5,y:.5}}},update(t){let e=this.el,{width:i,height:s}=this.data,h=e.getAttribute("geometry")||{};this.width=i<0?+(e.getAttribute("width")||h.width||0):i,this.height=s<0?+(e.getAttribute("height")||h.height||0):s,void 0!==t.width&&e.emit("xyresize",{xyrect:this},!1)}}),AFRAME.registerPrimitive("a-xycontainer",{defaultComponents:{xyrect:{},xycontainer:{}},mappings:{width:"xyrect.width",height:"xyrect.height",direction:"xycontainer.direction",spacing:"xycontainer.spacing",padding:"xycontainer.padding",reverse:"xycontainer.reverse",wrap:"xycontainer.wrap","align-items":"xycontainer.alignItems","justify-items":"xycontainer.justifyItems","align-content":"xycontainer.alignContent"}});const XYTheme={get(t){return this.defaultTheme},defaultTheme:{button:{color:"#222",labelColor:"#fff",hoverColor:"#333",geometry:"xy-rounded-rect",hoverHaptic:.3,hoverHapticMs:10},window:{closeButton:{color:"#111",hoverColor:"#f00"},titleBar:{color:"#111"},background:{color:"#111"}},collidableClass:"collidable",createButton(t,e,i,s,h,l){if(l&&l.hasAttribute("css"))return l;let a=t=>s&&s[t]||this.button[t];return(l=l||document.createElement("a-entity")).hasAttribute("geometry")||l.setAttribute("geometry",{primitive:a("geometry"),width:t,height:e}),l.classList.add(this.collidableClass),l.addEventListener("mouseenter",t=>{l.setAttribute("material",{color:a("hoverColor")});let e=a("hoverHaptic");if(e){let i=t.detail.cursorEl.components["tracked-controls"],s=i&&i.controller,h=s&&s.hapticActuators;h&&h[0]&&h[0].pulse(e,a("hoverHapticMs"))}}),l.addEventListener("xyresize",t=>{let e=t.detail.xyrect;l.setAttribute("geometry",{width:e.width,height:e.height})}),l.addEventListener("mouseleave",t=>{l.setAttribute("material",{color:a("color")})}),l.setAttribute("material",{color:a("color")}),h&&l.setAttribute("xylabel",{color:a("labelColor")}),i?i.appendChild(l):l}}};AFRAME.registerGeometry("xy-rounded-rect",{schema:{height:{default:1,min:0},width:{default:1,min:0},radius:{default:.05,min:0}},init(t){let e=new THREE.Shape,i=t.radius,s=(t.width||.01)/2,h=(t.height||.01)/2;e.moveTo(-s,-h+i),e.lineTo(-s,h-i),e.quadraticCurveTo(-s,h,-s+i,h),e.lineTo(s-i,h),e.quadraticCurveTo(s,h,s,h-i),e.lineTo(s,-h+i),e.quadraticCurveTo(s,-h,s-i,-h),e.lineTo(-s+i,-h),e.quadraticCurveTo(-s,-h,-s,-h+i),this.geometry=new THREE.ShapeGeometry(e)}}),AFRAME.registerComponent("xylabel",{dependencies:["xyrect"],schema:{value:{default:""},color:{default:"white"},align:{default:"left"},wrapCount:{default:0},xOffset:{default:0},zOffset:{default:.01},resolution:{default:32},renderingMode:{default:"auto",oneOf:["auto","canvas"]}},init(){this.el.addEventListener("xyresize",t=>this.update())},update(){let t=this.data,e=this.el,i=t.value,{width:s,height:h}=e.components.xyrect,l=t.wrapCount;if(0==l&&h>0&&(l=Math.max(s/h/.65,i.length)+1),""==i)return void this.remove();if("auto"==t.renderingMode&&!/[\u0100-\uDFFF]/.test(i)){let i=Object.assign({},t,{wrapCount:l,width:s,height:h});return delete i.resolution,delete i.renderingMode,e.setAttribute("text",i),setTimeout(()=>{let t=e.getObject3D("text");t&&(t.raycast=(()=>{}))},0),void this.P()}let a=t.resolution,o=Math.floor(a*l*.65),r=this.q||document.createElement("canvas"),n=.9*a+"px bold sans-serif",d=r.getContext("2d");d.font=n;let c=[""],u=0;for(let t of i)("\n"==t||d.measureText(c[u]+t).width>o)&&(c.push(""),u++),"\n"!=t&&(c[u]+=t);let y=a*c.length;if(!this.q||this.textWidth!=o||r.height!=y){let i=8;for(;i<o;)i*=2;this.remove(),this.q=r,r.height=y,r.width=i,this.V=o;let l=this.U=new THREE.CanvasTexture(r);l.anisotropy=4,l.repeat.x=o/i;let a=Math.min(s/o*y,h),n=new THREE.Mesh(new THREE.PlaneGeometry(s,a),new THREE.MeshBasicMaterial({map:l,transparent:!0}));n.position.set(t.xOffset,0,t.zOffset),n.raycast=(()=>{}),e.setObject3D("xylabel",n)}d.clearRect(0,0,o,y),d.font=n,d.textBaseline="top",d.textAlign=t.align,d.fillStyle=t.color;let x="center"===t.align?o/2:0,p=.1*a;for(let t of c)d.fillText(t,x,p),p+=a;this.U.needsUpdate=!0},remove(){this.P(),this.el.hasAttribute("text")&&this.el.removeAttribute("text")},P(){let t=this.el,e=t.getObject3D("xylabel");e&&(e.material.map.dispose(),e.material.dispose(),e.geometry.dispose(),t.removeObject3D("xylabel"),this.q=null)},getPos(t){let{text:e,xyrect:i}=this.el.components,s=this.data.value,h=0;if(this.q){h=this.q.getContext("2d").measureText(s.slice(0,t)).width/this.V}else if(e){let i=e.geometry.layout,l=i.glyphs,a=l.length,o=Math.max(0,a+t-s.length),r=l[Math.min(o,a-1)];h=r?(r.position[0]+r.data.width*(o>=a?1:.1))/i.width:0}return(h-.5)*i.width}}),AFRAME.registerComponent("xybutton",{dependencies:["xyrect"],schema:{color:{default:""},hoverColor:{default:""},labelColor:{default:""}},init(){let t=this.el,e=t.components.xyrect;XYTheme.get(t).createButton(e.width,e.height,null,this.data,!0,t)}}),AFRAME.registerComponent("xytoggle",{dependencies:["xyrect"],schema:{value:{default:!1}},events:{click(t){let e=this.el;e.value=!e.value,e.emit("change",{value:e.value},!1)}},init(){let t=this.el;Object.defineProperty(t,"value",{get:()=>this.data.value,set:e=>t.setAttribute("xytoggle","value",e)}),this.W=t.appendChild(document.createElement("a-circle")),t.addEventListener("xyresize",t=>this.update())},update(){let t=this.el,e=t.components.xyrect,i=e.height/2,s=t.value,h={color:s?"#0066ff":XYTheme.get(t).button.color,hoverColor:s?"#4499ff":""};t.setAttribute("xybutton",h),t.setAttribute("material","color",h.color),this.W.setAttribute("geometry","radius",.8*i),this.W.object3D.position.set((e.width/2-i)*(s?1:-1),0,.05),t.setAttribute("geometry",{primitive:"xy-rounded-rect",width:e.width,height:2*i,radius:i})}}),AFRAME.registerComponent("xyselect",{dependencies:["xyrect","xybutton"],schema:{values:{default:[]},label:{default:""},toggle:{default:!1},select:{default:0}},events:{click(t){let e=this.data;e.toggle?this.select((e.select+1)%e.values.length):this.Z?this.hide():this.show()}},init(){let t=this.el;if(this.data.toggle)t.setAttribute("xylabel","align","center");else{(this.G=t.appendChild(document.createElement("a-triangle"))).setAttribute("geometry",{vertexA:{x:.1,y:.03,z:0},vertexB:{x:-.1,y:.03,z:0},vertexC:{x:0,y:-.12,z:0}}),t.addEventListener("xyresize",t=>this.update())}},update(){let t=this.data,e=this.el;e.setAttribute("xylabel",{value:t.label||t.values[t.select]}),this.G&&this.G.object3D.position.set(e.components.xyrect.width/2-.2,0,.05)},show(){if(this.Z)return;let t=this.data.values,e=this.el.components.xyrect.height,i=(e+t.length*e)/2,s=this.Z=document.createElement("a-xycontainer");t.forEach((t,i)=>{let h=s.appendChild(document.createElement("a-xybutton"));h.setAttribute("height",e),h.setAttribute("label",t),h.addEventListener("click",t=>{t.stopPropagation(),this.select(i),this.hide()})}),s.object3D.position.set(0,i,.1),this.el.appendChild(s)},select(t){this.el.setAttribute("xyselect","select",t),this.el.emit("change",{value:this.data.values[t],index:t},!1)},hide(){this.Z&&(this.el.removeChild(this.Z),this.Z.destroy(),this.Z=null)}}),AFRAME.registerComponent("xydraggable",{schema:{dragThreshold:{default:.02},base:{type:"selector",default:null}},init(){let t=this.el;t.classList.add(XYTheme.get(t).collidableClass),this.J=this.J.bind(this),t.addEventListener("mousedown",this.J),this.tt=null},remove(){this.el.removeEventListener("mousedown",this.J)},tick(){this.tt?this.tt("xy-drag"):this.pause()},J(t){if(!t.detail.cursorEl||!t.detail.cursorEl.components.raycaster)return;let e=(this.data.base||this.el).object3D,i=t.detail.cursorEl,s=i.components.raycaster.raycaster,h=new THREE.Vector3,l=s.ray.direction.clone(),a=new THREE.Plane(new THREE.Vector3(0,0,-1),0).applyMatrix4(e.matrixWorld),o=t.detail.intersection;o&&a.setFromNormalAndCoplanarPoint(e.getWorldDirection(h),o.point),null===s.ray.intersectPlane(a,h)&&e.worldToLocal(h);let r=s.ray.clone(),n=h.clone(),d=this,c=!1;t.stopPropagation();let u=d.tt=(t=>{if(!c){if(l.manhattanDistanceTo(s.ray.direction)<d.data.dragThreshold)return;t="xy-dragstart",d.dragging=c=!0}n.copy(h),null!==s.ray.intersectPlane(a,h)&&e.worldToLocal(h),d.el.emit(t,{raycaster:s,point:h,pointDelta:n.sub(h),prevRay:r,cursorEl:i},!1),r.copy(s.ray)});d.play();let y=e=>e.target!=t.target&&e.stopPropagation();window.addEventListener("mouseenter",y,!0),window.addEventListener("mouseleave",y,!0);let x=t=>{if(t.detail.cursorEl==i&&(window.removeEventListener("mouseup",x),window.removeEventListener("mouseenter",y,!0),window.removeEventListener("mouseleave",y,!0),d.tt=null,c)){d.dragging=!1;let t=t=>t.stopPropagation();window.addEventListener("click",t,!0),setTimeout(()=>window.removeEventListener("click",t,!0),0),u("xy-dragend")}};window.addEventListener("mouseup",x)}}),AFRAME.registerComponent("xy-drag-control",{schema:{target:{type:"selector",default:null},draggable:{default:""},autoRotate:{default:!1}},init(){this.et=this.et.bind(this),this.it=[],this.st=new THREE.Quaternion},update(t){let e=this.data.draggable;e!==t.draggable&&(this.remove(),this.it=Array.isArray(e)?e:e?this.el.querySelectorAll(e):[this.el],this.it.forEach(t=>{t.setAttribute("xydraggable",{}),t.addEventListener("xy-dragstart",this.et),t.addEventListener("xy-drag",this.et)}))},remove(){this.it.forEach(t=>{t.removeAttribute("xydraggable"),t.removeEventListener("xy-dragstart",this.et),t.removeEventListener("xy-drag",this.et)})},et(t){let e=this.el,i=this.data,s=t.detail,{origin:h,direction:l}=s.raycaster.ray,{origin:a,direction:o}=s.prevRay,r=s.cursorEl,n=(i.target||e).object3D,d=new THREE.Quaternion;r.components["tracked-controls"]?"xy-dragstart"!=t.type?d.copy(this.st).invert().premultiply(r.object3D.getWorldQuaternion(this.st)):r.object3D.getWorldQuaternion(this.st):d.setFromUnitVectors(o,l);let c=n.parent.matrixWorld,u=new THREE.Matrix4,y=(new THREE.Matrix4).makeRotationFromQuaternion(d).multiply(u.setPosition(a.clone().negate())).premultiply(u.setPosition(h)).premultiply(c.clone().invert()).multiply(c);if(n.applyMatrix4?n.applyMatrix4(y):n.applyMatrix(y),this.postProcess&&this.postProcess(n,t),i.autoRotate){let e=n.getWorldPosition(new THREE.Vector3),i=h.clone().sub(e).normalize(),s=.8-i.y*i.y;if(s>0){let i=r.components.raycaster.getIntersection(t.target),l=n.parent.worldToLocal(i?i.point:e),a=n.quaternion.clone();y.lookAt(h,e,new THREE.Vector3(0,1,0)),n.quaternion.slerp(d.setFromRotationMatrix(y.premultiply(c.clone().invert())),.1*s),n.position.sub(l).applyQuaternion(a.invert().premultiply(n.quaternion)).add(l)}}}}),AFRAME.registerComponent("xywindow",{schema:{title:{default:""},closable:{default:!0},background:{default:!1}},init(){let t=this.el,e=XYTheme.get(t),i=e.window,s=this.controls=t.appendChild(document.createElement("a-entity")),h=s.object3D;if(s.setAttribute("xyitem",{fixed:!0}),h.position.set(0,0,.02),this.data.background){let e=this.ht=s.appendChild(document.createElement("a-plane"));e.setAttribute("material",{color:i.background.color,side:"double",transparent:!0,opacity:.8}),e.object3D.position.set(0,.25,-.04),t.addEventListener("object3dset",e=>{let i=t.object3D.children,s=i.indexOf(h);s>0&&i.unshift(...i.splice(s,1))})}if((this.lt=e.createButton(1,.5,s,i.titleBar,!0)).setAttribute("xy-drag-control",{target:t,autoRotate:!0}),this.ot=[],this.data.closable){let h=e.createButton(.5,.5,s,i.closeButton,!0);h.setAttribute("xylabel",{value:"X",align:"center"}),h.addEventListener("click",e=>t.parentNode.removeChild(t)),this.ot.push(h)}t.addEventListener("xyresize",t=>{this.update({})})},update(t){let e=this.el,i=this.data,{width:s,height:h}=e.components.xyrect,l=this.lt,a=this.ht,o=0,r=h/2+.3;for(let t of this.ot)t.object3D.position.set(s/2-.25-o,r,0),o+=.52;if(i.title!=t.title){let t=s-o-.1;l.setAttribute("xyrect",{width:t,height:.45}),l.setAttribute("xylabel",{value:i.title,wrapCount:Math.max(10,t/.2),xOffset:.1})}l.setAttribute("geometry",{width:s-o}),l.object3D.position.set(-o/2,r,0),a&&a.object3D.scale.set(s+.1,h+.7,1)}}),AFRAME.registerComponent("xyrange",{dependencies:["xyrect"],schema:{min:{default:0},max:{default:100},step:{default:0},value:{default:0},color0:{default:"white"},color1:{default:"#06f"},thumbSize:{default:.4},barHeight:{default:.08}},init(){let t=this.data,e=this.el,i=this.W=XYTheme.get(e).createButton(0,0,e,{geometry:"circle"}),s=new THREE.PlaneGeometry(1,1),h=this.rt=new THREE.Mesh(s),l=this.nt=new THREE.Mesh(s);e.setObject3D("xyrange",(new THREE.Group).add(h,l)),i.setAttribute("xydraggable",{base:e,dragThreshold:0}),i.addEventListener("xy-drag",i=>{let s=e.components.xyrect.width-t.thumbSize,h=(i.detail.point.x+s/2)/s*(t.max-t.min);t.step>0&&(h=Math.round(h/t.step)*t.step),this.setValue(h+t.min,!0)}),Object.defineProperty(e,"value",{get:()=>t.value,set:t=>this.setValue(t,!1)})},update(){let t=this.data,e=t.barHeight,i=this.el.components.xyrect.width-t.thumbSize,s=t.max-t.min,h=s>0?i*(t.value-t.min)/s:0,l=this.nt,a=this.rt,o=this.W;a.scale.set(i,e,1),a.material.color=new THREE.Color(t.color0),l.scale.set(h,e,1),l.position.set((h-i)/2,0,.02),l.material.color=new THREE.Color(t.color1),o.setAttribute("geometry","radius",t.thumbSize/2),o.object3D.position.set(h-i/2,0,.04)},setValue(t,e){if(!this.W.components.xydraggable.dragging||e){let i=this.data,s=Math.max(Math.min(t,i.max),i.min);s!=i.value&&e&&this.el.emit("change",{value:s},!1),this.el.setAttribute("xyrange","value",s)}}}),AFRAME.registerComponent("xyclipping",{dependencies:["xyrect"],schema:{exclude:{type:"selector",default:null},clipTop:{default:!0},clipBottom:{default:!0},clipLeft:{default:!1},clipRight:{default:!1}},init(){this.el.sceneEl.renderer.localClippingEnabled=!0,this.dt=[],this.ct=[],this.ut=null,this.yt={},this.update=this.update.bind(this),this.el.addEventListener("xyresize",this.update)},update(){let t=this.data,e=this.el.components.xyrect,i=this.dt=[];t.clipBottom&&i.push(new THREE.Plane(new THREE.Vector3(0,1,0),0)),t.clipTop&&i.push(new THREE.Plane(new THREE.Vector3(0,-1,0),e.height)),t.clipLeft&&i.push(new THREE.Plane(new THREE.Vector3(1,0,0),0)),t.clipRight&&i.push(new THREE.Plane(new THREE.Vector3(-1,0,0),e.width)),this.ct=i.map(t=>t.clone()),this.xt()},remove(){this.el.removeEventListener("xyresize",this.update),this.ct.splice(0);for(let[t,e]of Object.values(this.yt))t.raycast=e},tick(){this.el.object3D.matrixWorld.equals(this.ut)||this.xt()},xt(){this.ut=this.el.object3D.matrixWorld.clone(),this.dt.forEach((t,e)=>{this.ct[e].copy(t).applyMatrix4(this.ut)}),this.applyClippings()},applyClippings(){let t=this.data.exclude&&this.data.exclude.object3D,e=i=>{if(i!==t){if(i.material&&void 0!==i.material.clippingPlanes&&(i.material.clippingPlanes=this.ct,!this.yt[i.uuid])){let t=i.raycast;this.yt[i.uuid]=[i,t],i.raycast=((e,s)=>{let h=s.length;t.apply(i,[e,s]);let l=s[h];l&&this.ct.some(t=>t.distanceToPoint(l.point)<0)&&s.pop()})}for(let t of i.children)e(t)}};e(this.el.object3D)}}),AFRAME.registerComponent("xyscroll",{dependencies:["xyrect"],schema:{scrollbar:{default:!0}},init(){this.pt=this.ft=this.gt=0,this.wt=0,this.bt=0;let t=this.el,e=this.Et=this.vt(t,.3);t.setAttribute("xyclipping",{exclude:e}),t.setAttribute("xydraggable",{}),t.addEventListener("xy-drag",t=>{let e=t.detail.pointDelta;this.gt=-e.y,this.Rt(e.x,-e.y)}),t.addEventListener("xy-dragstart",t=>this.pause()),t.addEventListener("xy-dragend",t=>this.play()),t.addEventListener("xyresize",t=>this.update());let i=this.kt();i&&i.addEventListener("xyresize",t=>this.update())},kt(){for(let t of this.el.children)if(t!==this.Et&&!(t.getAttribute("xyitem")||{}).fixed)return t},vt(t,e){let i=XYTheme.get(t),s=t.appendChild(document.createElement("a-entity"));return this.Tt=i.createButton(e,e,s),this.Tt.addEventListener("click",t=>{this.gt=-this.At,this.play()}),this.Mt=i.createButton(e,e,s),this.Mt.addEventListener("click",t=>{this.gt=this.At,this.play()}),this.Ht=i.createButton(.7*e,1,s),this.Ht.setAttribute("xydraggable",{base:s}),this.Ht.addEventListener("xy-drag",t=>{this.Rt(0,t.detail.pointDelta.y*(this.wt-this.el.components.xyrect.height)/(this.Ct-this.bt||1))}),s},update(){let t=this.el.components.xyrect,e=t.height;this.Et.setAttribute("visible",this.data.scrollbar),this.Et.setAttribute("position",{x:t.width+.1,y:0,z:.05}),this.Tt.setAttribute("position",{x:0,y:e-.15,z:0}),this.Mt.setAttribute("position",{x:0,y:.15,z:0}),this.At=.3*Math.max(e/2,.5),this.zt=e-.3,this.Ct=e-.6,this.Rt(0,0)},tick(){Math.abs(this.gt)>.001?(this.gt*=.8,this.Rt(0,this.gt)):this.pause()},Rt(t,e){this.setScroll(this.pt+t,this.ft+e)},setScroll(t,e){let i=this.kt();if(!i)return;let s=this.el,{width:h,height:l}=s.components.xyrect,a=i.components.xyrect,o=a.height,r=a.width;i.components.xyrec||i.setAttribute("xyrect",{}),this.pt=Math.max(0,Math.min(t,r-h)),this.ft=Math.max(0,Math.min(e,o-l)),this.wt=o;let n=this.bt=Math.max(.2,Math.min(this.Ct*l/o,this.Ct)),d=this.zt-n/2-(this.Ct-n)*this.ft/(o-l||1);this.Ht.setAttribute("geometry","height",n),this.Ht.setAttribute("position","y",d);let c=a.data.pivot,u=c.x*a.width-this.pt,y=(1-c.y)*a.height-this.ft;i.setAttribute("position",{x:u,y:l-y}),i.emit("xyviewport",[y,y-l,-u,h-u],!1);let x=s.components.xyclipping;x&&x.applyClippings()}}),AFRAME.registerComponent("xylist",{dependencies:["xyrect"],schema:{itemWidth:{default:-1},itemHeight:{default:-1}},events:{click(t){for(let e of t.composedPath()){let i=e.dataset.listPosition;if(null!=i&&i>=0){this.el.emit("clickitem",{index:i,ev:t},!1);break}}}},init(){let t=this.el,e=this.data;this.Ft=null,this._t={},this.St=[],this.Ot=null,this.jt=0,this.Bt={size(t,i){if(e.itemHeight<=0){let t=i.Ft.create();e.itemHeight=+t.getAttribute("height"),e.itemWidth=+t.getAttribute("width")}return{width:e.itemWidth,height:e.itemHeight*t}},*targets(t){let i=e.itemHeight,s=Math.floor(-t[0]/i),h=Math.ceil(-t[1]/i);for(;s<h;)yield s++},layout(t,i){let s=t.components.xyrect,h=s?s.data.pivot:{x:.5,y:.5};t.setAttribute("position",{x:0+h.x*s.width,y:-i*e.itemHeight-h.y*s.height,z:0})}},t.setAttribute("xyrect","pivot",{x:0,y:1}),t.addEventListener("xyviewport",t=>this.setViewport(t.detail)),this.setViewport([0,0])},setLayout(t){this.Bt=t},setAdapter(t){this.Ft=t},setContents(t,e,i=!0){if(i)for(let t of Object.values(this._t))t.dataset.listPosition=-1,t.setAttribute("position","y",999);this.Ot=t,this.jt=e=null!=e?e:t.length,this.el.setAttribute("xyrect",this.Bt.size(e,this)),this.$t()},setViewport(t){this.Lt=t,this.$t()},$t(){let t=this.el,e=this.Ft,i=this.Bt,s=this._t,h={};if(e){for(let l of i.targets(this.Lt))if(l>=0&&l<this.jt){let a=s[l];a||(a=s[l]=this.St.pop()||t.appendChild(e.create(t))).classList.add(XYTheme.get(t).collidableClass),h[l]=a;let o=a.dataset;if(o.listPosition!=l){o.listPosition=l;let t=()=>{o.listPosition==l&&(i.layout(a,l),e.bind(l,a,this.Ot))};a.hasLoaded?t():a.addEventListener("loaded",t,{once:!0})}}for(let[t,e]of Object.entries(s))e.setAttribute("visible",null!=h[t]),h[t]||this.St.push(e);this._t=h}}}),AFRAME.registerPrimitive("a-xylabel",{defaultComponents:{xyrect:{},xylabel:{}},mappings:{width:"xyrect.width",height:"xyrect.height",value:"xylabel.value",color:"xylabel.color",align:"xylabel.align","wrap-count":"xylabel.wrapCount"}}),AFRAME.registerPrimitive("a-xybutton",{defaultComponents:{xyrect:{width:2,height:.5},xylabel:{align:"center"},xybutton:{}},mappings:{width:"xyrect.width",height:"xyrect.height",label:"xylabel.value",align:"xylabel.align",color:"xybutton.color","hover-color":"xybutton.hoverColor","label-color":"xybutton.labelColor"}}),AFRAME.registerPrimitive("a-xytoggle",{defaultComponents:{xyrect:{width:.8,height:.4},xytoggle:{}},mappings:{width:"xyrect.width",height:"xyrect.height",value:"xytoggle.value"}}),AFRAME.registerPrimitive("a-xyselect",{defaultComponents:{xyrect:{width:2,height:.5},xyselect:{}},mappings:{width:"xyrect.width",height:"xyrect.height",values:"xyselect.values",label:"xyselect.label",toggle:"xyselect.toggle",select:"xyselect.select",color:"xybutton.color","hover-color":"xybutton.hoverColor","label-color":"xybutton.labelColor"}}),AFRAME.registerPrimitive("a-xywindow",{defaultComponents:{xycontainer:{alignItems:"center"},xywindow:{}},mappings:{width:"xyrect.width",height:"xyrect.height",title:"xywindow.title"}}),AFRAME.registerPrimitive("a-xyscroll",{defaultComponents:{xyrect:{pivot:{x:0,y:1}},xyscroll:{}},mappings:{width:"xyrect.width",height:"xyrect.height",scrollbar:"xyscroll.scrollbar"}}),AFRAME.registerPrimitive("a-xyrange",{defaultComponents:{xyrect:{},xyrange:{}},mappings:{width:"xyrect.width",height:"xyrect.height",min:"xyrange.min",max:"xyrange.max",step:"xyrange.step",value:"xyrange.value","bar-height":"xyrange.barHeight"}});